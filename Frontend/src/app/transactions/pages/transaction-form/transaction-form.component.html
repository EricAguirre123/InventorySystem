<!-- HEADER -->
<div class="page-header">
  <h2>Nueva Transacci√≥n</h2>
</div>

<!-- ERROR -->
<div *ngIf="error" class="error-box">
  {{ error }}
</div>

<!-- CARD -->
<div class="form-card">

  <!-- STOCK INFO -->
  <div *ngIf="selectedStock > 0" class="stock-info">
    Stock disponible: <strong>{{ selectedStock }}</strong>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <div class="form-row">
      <label>Producto *</label>
      <select formControlName="productId" (change)="onProductChange()">
        <option value="">Seleccione un producto</option>
        <option *ngFor="let p of products" [value]="p.id">
          {{ p.name }} (Stock: {{ p.stock }})
        </option>
      </select>
    </div>

    <div class="form-row">
      <label>Tipo *</label>
      <select formControlName="transactionType">
        <option value="Venta">Venta</option>
        <option value="Compra">Compra</option>
      </select>
    </div>

    <div class="form-row">
      <label>Cantidad *</label>
      <input type="number" min="1" formControlName="quantity" />
    </div>

    <div class="form-row">
      <label>Precio Unitario</label>
      <input type="number" formControlName="unitPrice" readonly />
    </div>

    <div class="form-row">
      <label>Detalle</label>
      <input type="text" formControlName="detail" />
    </div>

    <div class="form-actions">
      <button
        type="submit"
        class="btn-primary"
        [disabled]="loading || form.invalid"
      >
        Guardar
      </button>

      <button
        type="button"
        class="btn-secondary"
        (click)="cancel()"
      >
        Cancelar
      </button>
    </div>

  </form>
</div>
